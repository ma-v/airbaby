<div class="container">
  <h1>My Babies</h1>
  <div class="row justify-center">
    <div class="row col-6">
      <ul>
        <% current_user.babies.each do |baby| %>
        <%= link_to(baby_path(baby)) do %>
        <div class="card-product mt-4">
          <%= cl_image_tag baby.photo, height: 180, width: 180, crop: :fill %>
          <div class="card-product-infos">
            <h3><%= baby.first_name %></h3>
            <h2><%= baby.title %></h2>
            <p><%= baby.description %></p>
            <h3><%= baby.price_per_day %> € / per day</h3>
            <p> <%= link_to "See my baby", baby_path(baby) %>
              <%= link_to "Edit my baby", edit_baby_path(baby) %>
              <%= link_to "Delete my baby", baby_path(baby),
              method: :delete,
              data: { confirm: "Are you sure?" } %></p>
            </div>
          </div>
          <% end %>
          <% end %>
        </ul>
      </div>
      <div class="row col-6">
        <div class="ft-recipe">
          <div class="ft-recipe__thumb"><span id="close-modal"><i class="ion ion-md-close"></i></span>
            <h3>My Baby's Reservation</h3>
          </div>
          <% current_user.babies.each do |baby| %>
            <%= cl_image_tag baby.photo, height: 180, width: 180, crop: :fill %>
            <div class="ft-recipe__content" id="details-<%=  baby.id %>" >
              <header class="content__header">
                <div class="row-wrapper">
                  <h2 class="recipe-title"><%= baby.first_name %></h2>
                  <% price = [] %>
                  <div class="user-rating">
                    <% baby.bookings.each do |booking| %>
                      <% price << booking.price %>
                    <% end %>
                    <%= price.inject(0){|sum,x| sum + x } %> €
                  </div>
                </div>

                 <% baby.bookings.each do |booking| %>
                  <ul class="recipe-details">
                    <li class="recipe-details-item time">
                      <i class="ion ion-ios-clock-outline"></i>
                      <span class="value">From :</span>
                      <span class="title"><%= booking.start_date.to_date %></span>
                    </li>
                    <li class="recipe-details-item ingredients">
                      <i class="ion ion-ios-book-outline"></i>
                      <span class="value">To :</span>
                      <span class="title"><%= booking.end_date.to_date %></span>
                    </li>
                    <li class="recipe-details-item servings">
                      <i class="ion ion-ios-person-outline"></i>
                      <span class="value"><%= (((booking.end_date - booking.start_date)/86400) + 1).to_i %></span>
                      <span class="title">Days</span>
                    </li>
                    <li class="recipe-details-item servings">
                      <i class="ion ion-ios-person-outline"></i>
                      <span class="value"><%= booking.price %> €</span>
                    </li>
                  </ul>
              <% end %>
          <% end %>
          </div>
        </div>
      </div>
    </div>



    <h1>My booked babies</h1>
    <div class="row justify-center">
      <div class="row">
        <ul>
          <% current_user.bookings.each do |booking| %>
          <%= link_to(baby_path(booking.baby)) do %>
          <div class="card-product mt-4">
            <%= cl_image_tag booking.baby.photo, height: 180, width: 180, crop: :fill %>
            <div class="card-product-infos">
              <h2><%= booking.baby.title %></h2>
              <h3><%= booking.baby.first_name %></h3>
              <p><%= booking.baby.description %></p>
              <h4>Total Cost : <%= booking.price %>€</h4>
              <p><%= link_to "Delete my booking", booking_path(booking),
              method: :delete,
              data: { confirm: "Are you sure?" } %></p>
            </div>
          </div>
          <% end %>
          <% end %>
        </ul>
      </div>
    </div>
  </div>

